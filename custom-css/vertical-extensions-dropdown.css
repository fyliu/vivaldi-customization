/* Generated by ChatGPT */
/* ============ Vertical Tabs: Balanced Hover Expansion ============ */
:root {
  --tabbar-expanded: 500px;   /* parent expanded width */
  --tabs-collapsed: 42px;     /* collapsed child width */
  --tabbar-collapsed: var(--tabs-collapsed) * 2;   /* parent collapsed width */
}

/* Parent collapsed by default */
#browser #tabs-tabbar-container {
  display: flex !important;
  flex-direction: row !important;
  width: var(--tabbar-collapsed) !important;
  min-width: var(--tabbar-collapsed) !important;
  max-width: var(--tabbar-collapsed) !important;
  overflow: hidden !important;
  transition: none !important;
}

/* Children collapsed by default */
#browser #tabs-container,
#browser #tabs-subcontainer {
  flex: 0 0 var(--tabs-collapsed) !important;
  width: var(--tabs-collapsed) !important;
  min-width: var(--tabs-collapsed) !important;
  overflow: hidden !important;
  transition: none !important;
}

/* Parent expands whenever it's hovered (anywhere inside) */
#browser #tabs-tabbar-container:hover {
  width: var(--tabbar-expanded) !important;
  min-width: var(--tabbar-expanded) !important;
  max-width: var(--tabbar-expanded) !important;
}

/* --- Child-hover states (order-independent via :has) --- */

/* Hovering tabs-container: it gets (expanded - 36), subcontainer stays 36 */
#browser #tabs-tabbar-container:has(#tabs-container:hover) #tabs-container {
  flex: 0 0 calc(var(--tabbar-expanded) - var(--tabs-collapsed)) !important;
  width: calc(var(--tabbar-expanded) - var(--tabs-collapsed)) !important;
  min-width: 0 !important;
}
#browser #tabs-tabbar-container:has(#tabs-container:hover) #tabs-subcontainer {
  flex: 0 0 var(--tabs-collapsed) !important;
  width: var(--tabs-collapsed) !important;
}

/* Hovering tabs-subcontainer: it gets (expanded - 36), tabs-container stays 36 */
#browser #tabs-tabbar-container:has(#tabs-subcontainer:hover) #tabs-subcontainer {
  flex: 0 0 calc(var(--tabbar-expanded) - var(--tabs-collapsed)) !important;
  width: calc(var(--tabbar-expanded) - var(--tabs-collapsed)) !important;
  min-width: 0 !important;
}
#browser #tabs-tabbar-container:has(#tabs-subcontainer:hover) #tabs-container {
  flex: 0 0 var(--tabs-collapsed) !important;
  width: var(--tabs-collapsed) !important;
}

/* Parent hovered but neither child hovered: subcontainer expands by default */
#browser #tabs-tabbar-container:hover:not(:has(#tabs-container:hover, #tabs-subcontainer:hover)) #tabs-container {
  flex: 0 0 var(--tabs-collapsed) !important;
  width: var(--tabs-collapsed) !important;
}
#browser #tabs-tabbar-container:hover:not(:has(#tabs-container:hover, #tabs-subcontainer:hover)) #tabs-subcontainer {
  flex: 0 0 calc(var(--tabbar-expanded) - var(--tabs-collapsed)) !important;
  width: calc(var(--tabbar-expanded) - var(--tabs-collapsed)) !important;
  min-width: 0 !important;
}

/* floating tab bars
 * https://forum.vivaldi.net/topic/82900/vertical-tabs-collapsed-expand-on-hover
 */
#main .inner > div:has(#tabs-tabbar-container:is(.left, .right)) {
  position: absolute;
  z-index: 2;
  opacity: 1;
  background-color: var(--colorBg);
  height: 100% !important;
}

#main
  .inner
  > div:has(#tabs-tabbar-container)
  #tabs-subcontainer:is(.left, .right)
  .toolbar
  .button-toolbar {
  position: static;
}

#main
  .inner
  > div:has(#tabs-tabbar-container):hover
  #tabs-subcontainer:is(.left, .right)
  .toolbar
  .button-toolbar {
  position: relative;
}

#tabs-tabbar-container:is(.left, .right):not(:focus-within):not(:hover)
  > div.overflow
  .tab-strip {
  overflow-y: hidden;
}

#main:has(#tabs-tabbar-container.left) #webview-container {
  margin-left: var(--tabbar-collapsed);
}
